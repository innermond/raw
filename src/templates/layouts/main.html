<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
      <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
      <title>{% block title %}{% endblock %}</title>
      <!-- Bootstrap -->
      <link href="/css/bootstrap.min.css" rel="stylesheet">
      <link href="/css/main.css" rel="stylesheet">
      <link href="/css/font-awesome.min.css" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Satisfy" rel="stylesheet">
      <link href="https://fonts.googleapis.com/css?family=Maitree:400,500,600" rel="stylesheet">
      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
      <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
      <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
   </head>
   <body>
      <header>
         <div class="header-bg">
            <div class="container">
               <nav class="navbar navbar-default">
                  <div class="clearfix">
                     <!-- Brand and toggle get grouped for better mobile display -->
                     <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="/"><img src="/images/logo.png" alt="logo"></a>
                        <h2>HOTLINE Pizza: 021 22 97 64</h2>
                     </div>
                     <!-- Collect the nav links, forms, and other content for toggling -->
                     <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav navbar-right">
                          <li {{ attribute(app, 'path') == '/pizza' ?  'class="active"' }}><a href="/pizza">Pizza</a></li>
                           <li {{ attribute(app, 'path') == '/paste-salate' ?  'class="active"' }}><a href="/paste-salate">Paste &amp; Salate</a></li>
                           <li {{ attribute(app, 'path') == '/oferte' ?  'class="active"' }}><a href="/oferte">Oferte</a></li>
                           <li {{ attribute(app, 'path') == '/comenzi' ?  'class="active"' }}><a href="/comenzi">Comenzi</a></li>
                        </ul>
                     </div>
                     <!-- /.navbar-collapse -->
                  </div>
                  <!-- /.container-fluid -->
               </nav>
            </div>
         </div>
         {% block slider %}{% endblock %}
      </header>
      <main>
         <div class="container">
           <div class="row">
           {% block content %}{% endblock %}
           </div>
         </div><!--//container end//-->
      </main>
      <footer>
         <div class="container">
            <div class="stamped-heading">
               <h5>Contact</h5>
            </div>
            <div class="row">
               <div class="col-sm-6">
                  <h6>Adresa</h6>
                  <p>Str. Maior Alexandru Câmpeanu nr 37,
                     Bucuresti, Romania
                  </p>
                  <p>Tel: + 021 22 97 64
                     Email: office@pizzaf1.ro
                  </p>
                  <p><span class="link"><a href="#">Google Maps</a></span>
                     <span class="link"><a href="#">Download direction</a></span>
                  </p>
                  <p class="more-margin">Suntem acasă de luni până vineri, între 10.00 şi 22.00.
                  </p>
                  <p class="social">
                     <a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                     <a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a>
                     <a href="#"><i class="fa fa-linkedin-square" aria-hidden="true"></i></a>
                     <a href="#"><i class="fa fa-youtube-play" aria-hidden="true"></i></a>
                  </p>
               </div>
               <div class="col-sm-6">
                  <h6>Trimite-ne o sugestie!</h6>
									<div id="flashMessage" ></div>
                  <form id="SuggestionEmailForm">
                     <div class="row">
                        <div class="form-group col-sm-6">
                           <label>Nume</label>
                           <input type="text" class="form-control" id="name">
                        </div>
                        <div class="form-group col-sm-6">
                           <label>Email</label>
                           <input type="email" class="form-control" id="email">
                        </div>
                        <div class="form-group col-sm-6">
                           <label>Telefon</label>
                           <input type="text" class="form-control" id="phone"> 
                        </div>
                        <div class="form-group col-sm-12">
                           <label>Mesaj</label>
                           <textarea class="form-control" id="message"></textarea>
                        </div>
                     </div>
                     <div class="button">
                        <input type="submit" class="btn btn-danger" value="Trimite" id="SendEmailButton">
                     </div>
                  </form>
                  <div class="copy">
                     <p><a href="/">PizzaF1</a> &copy; 2017 - Toate drepturile rezervate</p>
                  </div>
               </div>
            </div>
            <div class="row">
               <div class="col-sm-12 small-info">
Pizza F1 livreaza in Bucuresti sectoarele 1 si 6 si in zona limitrofa acestora. Zona de livrare gratuita limitata. Detalii despre zonele de livrare si tarife pe www.pizzaf1.ro sau la telefon. Pentru comenzile cu valoare mai mica de 30 lei se aplica un tarif suplimentar de 5 lei la totalul comenzii. O comanda poate contine mai multe oferte dar discounturile nu sunt cumulative. Comanda minima pentru livrare: 1 pizza de 30cm / 40cm, 2 pizza de 25 cm sau 30 lei pentru oricare alte produse. Nu se livreaza comenzi ce contin doar bauturi si / sau desert si / sau sosuri. Firma isi rezerva dreptul de a modifica preturile. Preturi valabile incepand cu iulie 2017. Plata se poate efectua numerar. In functie de conditiile meteo si de trafic, firma isi rezerva dreptul de a limita sau suspenda temporar serviciul de livrare. Fotografiile sunt reale.
              </div>
            </div>
         </div>
         <div class="after-footer">
            <div class="container">
               <a href="/lista-alergeni">Lista de alergeni </a>
               <a download href="/descarca-meniu">Download Meniu PDF</a>
            </div>
         </div>
      </footer>
			<div id="overlay">
			<div class="loader"></div>
			</div>
      <!-- jQuery first, then Bootstrap JS. -->
      <script src="/js/jquery.min.js"></script>
      <script src="/js/bootstrap.min.js"></script>
			<script>
jQuery(document).ready(function(){
	var $form = $('#SuggestionEmailForm');
	var $el = $('#overlay');
	var $flash = $('#flashMessage');
	var flashOk = '<div class="alert alert-success">' +
  'Emailul a fost <strong>trimis</strong>.' +
'</div>';
	var flashError = '<div rel="flashing" class="alert alert-danger">' +
  ':lines.' +
'</div>';
	var flashErrorLine = '<span class="help-block">:line</span>';
	function sendEmail() {
		$el.css('display', 'flex');
		var data = {
				name: $("#name").val(),
				phone: $("#phone").val(),
				email: $("#email").val(),
				message: $("#message").val()
		};
		$.ajax({
				type: "POST",
				url: "/email",
				data: data,
				dataType: "json",
				success: function(data, text, xhr){
					$el.css('display', 'none');
          $('[rel="flashing"]').remove();
					$form.trigger('reset');
					$flash.html(flashOk);
				},
        error: function(xhr, txt, err) {
          $el.css('display', 'none');
          $('[rel="flashing"]').remove();
          var err = xhr.responseJSON;
          if (typeof err == "string") {
            $flash.html(flashError.replace(':lines', "eroare email: " + err));
            return ;
          }
          var lines = '';
          for (var p in err) {
            if ( ! err.hasOwnProperty(p)) continue;
            var $elem = $('#' + p), line = [];
            while(err[p].length) {
              var curr = err[p].shift();
              if (p == "name" && curr[0] == 'length.between') {
                var $name = $("#" + p);
                var text = $name.val().length >= curr[1][1] ? 'exces de text' : 'text insuficient';
                text += " - %s caracter(e), necesare între %s și %s".replace("%s", $name.val().length).replace("%s", curr[1][0]).replace("%s", curr[1][1]);
                curr[0] = text;
              }
              console.log(curr);
              line.push(flashErrorLine.replace(':line', curr[0]));
            }
            var errorLines = flashError.replace(':lines', line.join(''));
            $elem.after(errorLines);
            $elem.parent().addClass('has-error');
          }
          $flash.html(flashError.replace(':lines', 'corectați erorile pentru trimiterea emailului'));
        }
		});
	}

	$('#SendEmailButton').click(function(evt){
		evt.preventDefault();
		sendEmail();
	});
});
			</script>
   </body>
</html>
